<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>관광여지도</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
</head>

<body>
    <div class="container">
        <!-- 검색어 부분 -->
        <h2>관광 명소 검색</h2>
        <form id="searchForm">
            <input type="text" id="keyword" placeholder="검색어를 입력하세요" required />
            <button type="submit">검색</button>
        </form>

        <!-- kakao map api를 통해 지도 구현 -->
        <div id="map" style="width:800px;height:600px;"></div>
        <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=0c6932fce6eef079ab6ff619f0a9c38c&libraries=services"></script>
        <script>
            var mapContainer = document.getElementById('map'), // 지도를 표시할 div
                mapOption = {
                    center: new kakao.maps.LatLng(37.5759, 126.97769), // StartingPoint: 광화문
                    level: 5 // 지도의 확대 레벨 (조정)
                };

            var map = new kakao.maps.Map(mapContainer, mapOption); // 지도를 생성

            var marker = new kakao.maps.Marker({ // 마커를 생성
                position: mapOption.center, // 초기 위치는 지도 중심
                map: map // 마커를 표시할 지도 객체
            });

            // 검색 이벤트 핸들러
            document.getElementById('searchForm').addEventListener('submit', function(event) {
                event.preventDefault(); // 기본 제출 동작 방지

                var keyword = document.getElementById('keyword').value; // 검색어 가져오기

                // Kakao 지도 API의 장소 검색 서비스를 이용하여 검색어에 해당하는 좌표 가져오기
                var geocoder = new kakao.maps.services.Geocoder();
                geocoder.addressSearch(keyword, function(result, status) { // addressSearch()함수를 이용해 keyword에 해당하는 좌표를 검색하고 완료되면 콜백 함수가 호출
                    if (status === kakao.maps.services.Status.OK) {
                        var coords = new kakao.maps.LatLng(result[0].y, result[0].x); // 검색된 좌표

                        // 검색된 위치로 지도 이동 및 확대 레벨 설정
                        map.setCenter(coords);
                        map.setLevel(5); // 원하는 확대 레벨로 조정

                        // 마커 위치 변경
                        marker.setPosition(coords);
                    } else {
                        alert('검색된 위치를 찾을 수 없습니다.');
                    }
                });
            });
        </script>
    </div>
</body>

</html>
